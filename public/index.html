<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="style.css" />
		<title>signal viewer</title>
	</head>
	<body>
		<div id="signal"></div>
		<script src="plotly-2.14.0.min.js"></script>
		<script>
			createChart();

			async function createChart() {
				const myDiv = document.getElementById("signal");

				const {xAxis, yAxis} = await getData();

				Plotly.newPlot(myDiv, [
					{
						x: xAxis,
						y: yAxis,
						type: "line",
					},
				]);

				
			}

			async function getData() {
				const response = await fetch(
					"signals/healthy_emg.csv"
				);
				const data = await response.text();

				const table = data.split("\n").slice(1);

				const xAxis = [];
				const yAxis = [];

				table.forEach((row) => {
					let column = row.split(",");

					let time = column[0];
					let value = column[1];

					xAxis.push(time);
					yAxis.push(parseFloat(value));

					console.log(`time: ${time}, value: ${value}`);
				});

				return {
					xAxis,
					yAxis,
				};
			}
		</script>
	</body>
</html>
